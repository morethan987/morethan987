# Dify英语考试答题机

基于Dify的自动英语考试答题系统，实现题目图片的自动识别和答案生成。

## 核心功能

- 自动监控文件夹中的新图片
- 并发处理多个题目图片
- 按时间顺序处理考试题目
- 支持断点续传，避免重复处理
- 实时输出答题结果

## 系统架构

### 文件处理流程
1. 监控线程持续扫描指定文件夹
2. 发现新图片后加入处理队列
3. 处理线程从队列获取图片进行处理
4. 上传图片到Dify服务器
5. 执行工作流获取答案
6. 输出处理结果

### 关键设计
- 多线程架构：监控线程 + 处理线程
- 队列管理：确保题目按序处理
- 断点续传：记录已处理文件列表
- 异常处理：自动重试和错误日志

## 使用前准备

1. 部署[Dify](https://github.com/langgenius/dify)
2. 导入答题机`.yml`配置文件
3. 配置课堂录音知识库
4. 根据知识库名称调整工作流
5. 在`访问API`页面生成api_key
6. 修改main.py中的配置：
   - `api_key`: 你的Dify API密钥
   - `base_file_path`: 题目图片所在文件夹
   - `user`: 用户标识

## ⚠️ 注意事项

### 文件命名规范
- 支持的格式：PNG/JPG
- 文件名格式：`YYYYMMDD_HHMMSS.jpg`（例如：20240309_153010.jpg）
- 手机拍照时的默认命名符合要求
- 按拍摄时间自动排序处理

### 使用建议
- 支持异步处理，可以先启动程序扫描目标文件夹；考试开始之后先拍两三张照片让工作流开始运转，然后再继续拍剩余的题目
- 使用USB连接传输图片，避免网络传输延迟
- 单个题目处理耗时约20-30秒
- 程序支持中途暂停，重启后会自动跳过已处理题目

### 输出说明
控制台将实时显示：
```
题目答案1: 第1题，B.选项名称
题目答案2: 第2题，C.选项名称
...
```
