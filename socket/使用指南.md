# Python 命令行聊天室 - 完整使用指南

## 🎉 项目简介

这是一个功能完整的Python命令行聊天室项目，支持群聊、私聊，并提供两种不同的用户界面体验：
- **简单版本**: 基础命令行界面
- **UI增强版**: 类似QQ的布局，消息左右对齐显示

## 📁 文件结构

```
socket/
├── server.py           # 聊天服务器核心
├── client.py           # 简单版客户端
├── client_ui.py        # UI增强版客户端 (推荐)
├── start_server.py     # 服务器启动器
├── start_client.py     # 客户端启动器
├── test_ui.py          # UI测试工具
├── 启动服务器.bat      # Windows服务器启动器
├── 启动客户端.bat      # Windows客户端启动器
├── README.md           # 详细说明文档
└── 使用指南.md         # 本文件
```

## 🚀 快速开始

### 方式一: 使用启动器 (推荐)

#### 1. 启动服务器
**Linux/macOS:**
```bash
python start_server.py
```

#### 2. 启动客户端
**Linux/macOS:**
```bash
python start_client.py
```

### 方式二: 直接启动

#### 1. 启动服务器
```bash
python server.py
```

#### 2. 启动客户端
**UI增强版 (推荐):**
```bash
python client_ui.py
```

**简单版:**
```bash
python client.py
```

## 🎨 界面预览

### UI增强版界面 (client_ui.py)
```
┌─────────────── 聊天室 - 张三 ───────────────┐
│[10:30:15] 系统: 欢迎加入聊天室！              │ 在线用户 (3)  │
│                                             │ ──────────── │
│[10:30:20] 李四: 大家好！                    │  张三         │
│                   [10:30:25] 我: 你好！     │  李四         │
│[10:30:30] [私聊] 王五: 私聊消息             │  王五         │
│          [10:30:35] 我 -> 王五: 回复消息     │              │
│                                             │              │
│─────────────────────────────────────────────┤──────────────│
│输入消息 (Enter发送, Ctrl+C退出):             │              │
│ 正在输入的消息...                           │              │
│快捷键: @用户名 私聊 | PageUp/PageDown 滚动消息│              │
└─────────────────────────────────────────────┴──────────────┘
```

### 简单版界面 (client.py)
```
张三: 大家好！
[私聊] 李四: 你好张三！

===== 在线用户 =====
1. 张三
2. 李四
3. 王五
====================

> 输入消息...
```

## 💬 聊天功能

### 群聊
直接输入消息即可发送群聊：
```
> 大家好，我是新用户！
```

### 私聊
使用 `@用户名 消息内容` 格式发送私聊：
```
> @张三 你好，能私聊一下吗？
```

### 命令说明

| 命令 | 功能 | 适用版本 |
|------|------|----------|
| `/help` | 查看帮助信息 | 简单版 |
| `/users` | 查看在线用户 | 简单版 |
| `/quit` | 退出聊天室 | 两个版本 |
| `Enter` | 发送消息 | 两个版本 |
| `PageUp/PageDown` | 滚动消息历史 | UI增强版 |
| `Ctrl+C` | 强制退出 | 两个版本 |

## 🌐 网络连接

### 本机使用
1. 启动服务器：`python start_server.py`
2. 启动客户端：`python client_ui.py`

### 局域网使用
1. 在一台电脑上启动服务器
2. 记住显示的IP地址（如 192.168.1.100）
3. 其他设备连接：`python client_ui.py 192.168.1.100`

### 手机热点使用
1. 开启手机热点，其他设备连接
2. 在一台设备上启动服务器，记住IP
3. 其他设备使用该IP连接

## 🔧 高级配置

### 服务器配置
使用 `start_server.py` 可以配置：
- 监听端口（默认8888）
- 网络接口（本机/所有接口）
- 最大连接数（默认50）

### 终端要求
**UI增强版最低要求:**
- 终端尺寸：80x20 字符
- 支持颜色显示
- 支持curses库

**简单版要求:**
- 任意终端大小
- 基础文本显示即可

## 🐛 常见问题

### Q: Windows上提示"No module named '_curses'"
**A:** 安装Windows curses支持：
```bash
pip install windows-curses
```

### Q: 连接服务器失败
**A:** 检查项：
1. 服务器是否已启动
2. IP地址是否正确
3. 端口8888是否被占用
4. 防火墙是否阻止连接

### Q: 私聊发送失败
**A:** 确认：
1. 目标用户是否在线
2. 昵称拼写是否正确
3. 使用正确格式：`@昵称 消息内容`

### Q: 界面显示异常
**A:** 建议：
1. 增大终端窗口大小
2. 尝试使用简单版客户端
3. 检查终端是否支持颜色

### Q: 端口被占用
**A:** 解决方案：
1. 关闭占用端口的程序
2. 或修改代码中的端口号为其他值（如8889）

## 🧪 测试功能

运行测试脚本检查UI客户端是否正常：
```bash
python test_ui.py
```

测试内容包括：
- 模块导入检查
- 功能组件测试
- curses兼容性测试
- 终端环境检测

## 📋 系统要求

### 基本要求
- Python 3.6 或更高版本
- 网络连接能力

### 操作系统支持
- **Linux**: 完全支持
- **macOS**: 完全支持
- **Windows**: 支持（可能需要安装windows-curses）

### 推荐配置
- 终端大小: 80x24 或更大
- 支持256色显示
- UTF-8编码支持

## 🎯 使用技巧

### UI增强版技巧
1. **消息对齐**: 自己的消息显示在右边，别人的在左边
2. **用户列表**: 右侧实时显示在线用户，自己的昵称高亮
3. **消息滚动**: 使用PageUp/PageDown浏览历史消息
4. **输入体验**: 支持左右箭头移动光标，退格删除
5. **时间戳**: 每条消息都有时间戳
6. **颜色区分**: 不同类型消息使用不同颜色

### 简单版技巧
1. **命令快捷**: 使用简化命令如 `/h`、`/u`、`/q`
2. **批量操作**: 可以快速查看用户列表和帮助
3. **兼容性好**: 在任何终端环境都能稳定运行

### 网络优化
1. **延迟降低**: 尽量使用有线网络连接
2. **稳定性**: 避免频繁切换网络
3. **连接数**: 服务器支持最多50个同时连接

## 🔒 安全注意

1. **网络环境**: 仅在可信网络中使用
2. **密码保护**: 使用热点时设置强密码
3. **防火墙**: 确保必要端口的访问权限
4. **内容安全**: 聊天内容未加密，注意隐私

## 🚧 已知限制

1. **消息加密**: 当前版本未实现端到端加密
2. **文件传输**: 不支持文件和图片传输
3. **历史记录**: 消息不会持久化保存
4. **用户认证**: 无用户名密码验证机制
5. **消息长度**: 单条消息建议不超过1000字符

## 🔮 未来计划

- [ ] 消息加密功能
- [ ] 文件传输支持
- [ ] 聊天记录保存
- [ ] 用户认证系统
- [ ] 表情和emoji支持
- [ ] 主题颜色自定义
- [ ] 语音消息支持
- [ ] Web版客户端

## 📞 技术支持

如遇到问题：
1. 首先运行测试脚本：`python test_ui.py`
2. 查看README.md中的详细说明
3. 检查本使用指南的常见问题部分

## 📄 开源协议

本项目仅供学习和研究使用，请遵循相关开源协议。

---

**祝您使用愉快！🎊**

*最后更新: 2024年*
